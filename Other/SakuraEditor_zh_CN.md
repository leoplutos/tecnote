# Sakura Editor 相关

## 快捷键映射
#### Ctrl + w ：关闭当前tab
```
設定 → 共通設定 → キー割り当て → 
種別：ウィンドウ系
选择左侧的【閉じる】
选择中间的【Ctrl】CheckBox
选择右侧的【Ctrl + W】
点击下面的【割付(B)】按钮
```
#### F10 ：打开文件树(FileTree)
```
設定 → 共通設定 → キー割り当て → 
種別：検索系
选择左侧的【ファイルツリー】
选择右侧的【F10】
点击下面的【割付(B)】按钮
```
设定好以后
- Ctrl+w：关闭当前tab
- F10：打开文件树
- F11：打开大纲(OutLine)&nbsp;&nbsp;&nbsp;&nbsp;※：默认

#### 文件树的设定
默认的文件树比较难用，需要设定一下
1. 删除默认设定
2. 先添加一个 ``folder``，命名为 ``Root``
3. 在  ``Root`` 下面添加一个 ``grep``，内容为
```
../../.
```
设定是从当前路径开始向上2级

## 自动补全
设定位置：  
設定 → タイプ別設定 → 支援 → 入力補完機能 → 単語ファイル  
可以使用vim的字典 ：[Vim-dict](../DevTool/Vim-conf/vimconf/dict/)  
快捷键为：
```
Ctrl + 空格
或者
Ctrl + /
```

## 定义关键字高亮(要按顺序)
sakura的正则表达式是用bregonig.dll的一个库，有很多和普通正则不同的地方  
比如：
 - \x{HHHH}：是使用unicode码
 - 在正規表現キーワード处的定义要以 ``/k`` 结尾，而普通搜索时却不用  
更多可以看 [这里](https://sakura-editor.github.io/help/HLP000089.html)

设定位置：  
設定 → タイプ別設定 → 正規表現キーワード  

#### 高亮设定
1. 行尾空格(251,174,174 #fbaeae)  
```
/[\x{0009}\x{000C}\x{0020}\x{00A0}\x{1680}\x{2000}\x{2001}\x{2002}\x{2003}\x{2004}\x{2005}\x{2006}\x{2007}\x{2008}\x{2009}\x{200A}\x{2028}\x{2029}\x{202F}\x{205F}\x{3000}]+[\r\n]/k
```
或者
```
/[\x{0009}\x{000C}\x{0020}\x{00A0}\x{1680}\x{2000}\x{2001}\x{2002}\x{2003}\x{2004}\x{2005}\x{2006}\x{2007}\x{2008}\x{2009}\x{200A}\x{2028}\x{2029}\x{202F}\x{205F}\x{3000}]+$/k
```
2. 函数(0,128,255 #0080ff)
```
/[a-zA-Z_]+[0-9a-zA-Z_]*[ \t]*(?=\()/k
```
3. 关键字(0,0,255 #0000ff)
```
/(if|for|while|switch|return|sizeof)[ \t]*\(/k
```
4. 以``:``开头的内容(0,0,160 #0000a0)
```
/[a-zA-Z_]+[0-9a-zA-Z_]:+[\r\n]/k
```
5. 以``[something]:``开头的内容(0,0,160 #0000a0)
```
/\[[a-zA-Z_]+[0-9a-zA-Z_]\]:+[\r\n]/k
```

## 启用ctags

#### 1.确认Sakura Editor版本
ヘルプ → バージョン情報  
需要版本为2.4.0.0以上

#### 2.生成tags文件
検索 → タグファイルの作成  
* 作成フォルダ：你的项目的根路径
* サブフォルダも対象にする：选择
* コマンドラインオプション：
```
--langmap=C:+.pc --c-kinds=defghlmstuvxzLD
```

然后点击 ``作成`` 按钮，会在项目根路径下生成1个tags文件

#### 3.使用tags
打开一个文件，在使用函数或者变量的地方按下 F12 就会跳出需要跳转的文件列表（如果只有1个则自动跳转）。  
当按下 F12 的时候，会从当前打开文件的路径逐级向上寻找 tags 文件，找到了就用里面的定义自动跳转。

## 针对C语言追加.pc扩展名
設定 → タブ別設定一覧  
选择【C/C++】 → 設定変更  
在右上角【ファイル拡張子】的地方，添加【,pc】  
保存即可

## TAB符号表示设定
設定 → タブ別設定一覧  
选择【C/C++】 → 設定変更  
在左部中间的位置有【TAB表示】，有3个选项
* 指定文字
* 短箭头
* 长箭头

## 开启CSV模式
設定 → タブ別設定一覧 → 追加 → 設定変更  
名字修改为 ``CSV`` ，扩展名修改为 ``csv,tsv``  
在 ``TAB表示`` 下面的单选框，选择 ``CSV``  
保存即可

## 添加其他语言支持
設定 → 共通設定 → 強調キーワード → セット追加 → 输入 ``Python``  
インポート → 选择kwd文件路径( 安装路径下的 ``/keyword/python_2.5.kwd`` )  
笔者整理的一些 ``keyword`` 文件
- [sakura_keyword](sakura_keyword)

## 定义Keyword文件（kwd）
1. 将语言的keyword列出
2. 将语言的类型列出
存到文件，保存扩展名为kwd即可

#### 一些语言的keyword
- [Python keyword](https://github.com/python/cpython/blob/3.11/Lib/keyword.py)
- [Python type](https://docs.python.org/zh-cn/3/library/stdtypes.html)
- [Rust keyword](https://doc.rust-lang.org/book/appendix-01-keywords.html)
- [Go keyword](https://go.dev/ref/spec)  

另外，vim的syntax定义也可以参考
